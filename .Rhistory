geom_point(color = "darkred", size = 0.05) +
scale_y_continuous(breaks = 1:36, labels = sens) +
scale_x_datetime(date_labels = "%b/%y", date_breaks = "1 month") +
xlab("Data") + ylab("Sensor")
invisible(dev.off())
agg_png('C:/Users/Daniel/Desktop/WCAMA 2021/grid_presence.png',  scaling = 4, width = 3000, height = 2000, units = 'px')
data_frank %>%
mutate(A0 = ifelse(!is.na(A0), 1, NA), A1 = ifelse(!is.na(A1), 2, NA),
A2 = ifelse(!is.na(A2), 3, NA), A3 = ifelse(!is.na(A3), 4, NA),
A4 = ifelse(!is.na(A4), 5, NA), A5 = ifelse(!is.na(A5), 6, NA),
AB0 = ifelse(!is.na(AB0), 7, NA), AB1 = ifelse(!is.na(AB1), 8, NA),
AB2 = ifelse(!is.na(AB2), 9, NA), AB3 = ifelse(!is.na(AB3), 10, NA),
AB4 = ifelse(!is.na(AB4), 11, NA), AB5 = ifelse(!is.na(AB5), 12, NA),
B0 = ifelse(!is.na(B0), 13, NA), B1 = ifelse(!is.na(B1), 14, NA),
B2 = ifelse(!is.na(B2), 15, NA), B3 = ifelse(!is.na(B3), 16, NA),
B4 = ifelse(!is.na(B4), 17, NA), B5 = ifelse(!is.na(B5), 18, NA),
C0 = ifelse(!is.na(C0), 19, NA), C1 = ifelse(!is.na(C1), 20, NA),
C2 = ifelse(!is.na(C2), 21, NA), C3 = ifelse(!is.na(C3), 22, NA),
C4 = ifelse(!is.na(C4), 23, NA), C5 = ifelse(!is.na(C5), 24, NA),
CD0 = ifelse(!is.na(CD0), 25, NA), CD1 = ifelse(!is.na(CD1), 26, NA),
CD2 = ifelse(!is.na(CD2), 27, NA), CD3 = ifelse(!is.na(CD3), 28, NA),
CD4 = ifelse(!is.na(CD4), 29, NA), CD5 = ifelse(!is.na(CD5), 30, NA),
D0 = ifelse(!is.na(D0), 31, NA), D1 = ifelse(!is.na(D1), 32, NA),
D2 = ifelse(!is.na(D2), 33, NA), D3 = ifelse(!is.na(D3), 34, NA),
D4 = ifelse(!is.na(D4), 35, NA), D5 = ifelse(!is.na(D5), 36, NA)) %>%
pivot_longer(cols = c(A0:D5), names_to = "sensors", values_to = "temp") %>%
drop_na(temp) %>%
ggplot(aes(x = DateTime, y = temp)) +
geom_point(color = "darkgreen", size = 0.01) +
scale_y_continuous(breaks = 1:36, labels = sens) +
scale_x_datetime(date_labels = "%b/%y", date_breaks = "1 month") +
xlab("Data") + ylab("Sensor")
invisible(dev.off())
agg_png('C:/Users/Daniel/Desktop/WCAMA 2021/grid_miss.png',  scaling = 4, width = 3000, height = 2000, units = 'px')
data_frank %>%
mutate(A0 = ifelse(is.na(A0), 1, NA), A1 = ifelse(is.na(A1), 2, NA),
A2 = ifelse(is.na(A2), 3, NA), A3 = ifelse(is.na(A3), 4, NA),
A4 = ifelse(is.na(A4), 5, NA), A5 = ifelse(is.na(A5), 6, NA),
AB0 = ifelse(is.na(AB0), 7, NA), AB1 = ifelse(is.na(AB1), 8, NA),
AB2 = ifelse(is.na(AB2), 9, NA), AB3 = ifelse(is.na(AB3), 10, NA),
AB4 = ifelse(is.na(AB4), 11, NA), AB5 = ifelse(is.na(AB5), 12, NA),
B0 = ifelse(is.na(B0), 13, NA), B1 = ifelse(is.na(B1), 14, NA),
B2 = ifelse(is.na(B2), 15, NA), B3 = ifelse(is.na(B3), 16, NA),
B4 = ifelse(is.na(B4), 17, NA), B5 = ifelse(is.na(B5), 18, NA),
C0 = ifelse(is.na(C0), 19, NA), C1 = ifelse(is.na(C1), 20, NA),
C2 = ifelse(is.na(C2), 21, NA), C3 = ifelse(is.na(C3), 22, NA),
C4 = ifelse(is.na(C4), 23, NA), C5 = ifelse(is.na(C5), 24, NA),
CD0 = ifelse(is.na(CD0), 25, NA), CD1 = ifelse(is.na(CD1), 26, NA),
CD2 = ifelse(is.na(CD2), 27, NA), CD3 = ifelse(is.na(CD3), 28, NA),
CD4 = ifelse(is.na(CD4), 29, NA), CD5 = ifelse(is.na(CD5), 30, NA),
D0 = ifelse(is.na(D0), 31, NA), D1 = ifelse(is.na(D1), 32, NA),
D2 = ifelse(is.na(D2), 33, NA), D3 = ifelse(is.na(D3), 34, NA),
D4 = ifelse(is.na(D4), 35, NA), D5 = ifelse(is.na(D5), 36, NA)) %>%
pivot_longer(cols = c(A0:D5), names_to = "sensors", values_to = "temp") %>%
drop_na(temp) %>%
ggplot(aes(x = DateTime, y = temp)) +
geom_point(color = "darkred", size = 0.01) +
scale_y_continuous(breaks = 1:36, labels = sens) +
scale_x_datetime(date_labels = "%b/%y", date_breaks = "1 month") +
xlab("Data") + ylab("Sensor")
invisible(dev.off())
agg_png('C:/Users/Daniel/Desktop/WCAMA 2021/grid_presence.png',  scaling = 4, width = 3000, height = 2000, units = 'px')
data_frank %>%
mutate(A0 = ifelse(!is.na(A0), 1, NA), A1 = ifelse(!is.na(A1), 2, NA),
A2 = ifelse(!is.na(A2), 3, NA), A3 = ifelse(!is.na(A3), 4, NA),
A4 = ifelse(!is.na(A4), 5, NA), A5 = ifelse(!is.na(A5), 6, NA),
AB0 = ifelse(!is.na(AB0), 7, NA), AB1 = ifelse(!is.na(AB1), 8, NA),
AB2 = ifelse(!is.na(AB2), 9, NA), AB3 = ifelse(!is.na(AB3), 10, NA),
AB4 = ifelse(!is.na(AB4), 11, NA), AB5 = ifelse(!is.na(AB5), 12, NA),
B0 = ifelse(!is.na(B0), 13, NA), B1 = ifelse(!is.na(B1), 14, NA),
B2 = ifelse(!is.na(B2), 15, NA), B3 = ifelse(!is.na(B3), 16, NA),
B4 = ifelse(!is.na(B4), 17, NA), B5 = ifelse(!is.na(B5), 18, NA),
C0 = ifelse(!is.na(C0), 19, NA), C1 = ifelse(!is.na(C1), 20, NA),
C2 = ifelse(!is.na(C2), 21, NA), C3 = ifelse(!is.na(C3), 22, NA),
C4 = ifelse(!is.na(C4), 23, NA), C5 = ifelse(!is.na(C5), 24, NA),
CD0 = ifelse(!is.na(CD0), 25, NA), CD1 = ifelse(!is.na(CD1), 26, NA),
CD2 = ifelse(!is.na(CD2), 27, NA), CD3 = ifelse(!is.na(CD3), 28, NA),
CD4 = ifelse(!is.na(CD4), 29, NA), CD5 = ifelse(!is.na(CD5), 30, NA),
D0 = ifelse(!is.na(D0), 31, NA), D1 = ifelse(!is.na(D1), 32, NA),
D2 = ifelse(!is.na(D2), 33, NA), D3 = ifelse(!is.na(D3), 34, NA),
D4 = ifelse(!is.na(D4), 35, NA), D5 = ifelse(!is.na(D5), 36, NA)) %>%
pivot_longer(cols = c(A0:D5), names_to = "sensors", values_to = "temp") %>%
drop_na(temp) %>%
ggplot(aes(x = DateTime, y = temp)) +
geom_point(color = "darkgreen", size = 0.001) +
scale_y_continuous(breaks = 1:36, labels = sens) +
scale_x_datetime(date_labels = "%b/%y", date_breaks = "1 month") +
xlab("Data") + ylab("Sensor")
invisible(dev.off())
agg_png('C:/Users/Daniel/Desktop/WCAMA 2021/grid_presence.png',  scaling = 2, width = 3000, height = 2000, units = 'px')
data_frank %>%
mutate(A0 = ifelse(!is.na(A0), 1, NA), A1 = ifelse(!is.na(A1), 2, NA),
A2 = ifelse(!is.na(A2), 3, NA), A3 = ifelse(!is.na(A3), 4, NA),
A4 = ifelse(!is.na(A4), 5, NA), A5 = ifelse(!is.na(A5), 6, NA),
AB0 = ifelse(!is.na(AB0), 7, NA), AB1 = ifelse(!is.na(AB1), 8, NA),
AB2 = ifelse(!is.na(AB2), 9, NA), AB3 = ifelse(!is.na(AB3), 10, NA),
AB4 = ifelse(!is.na(AB4), 11, NA), AB5 = ifelse(!is.na(AB5), 12, NA),
B0 = ifelse(!is.na(B0), 13, NA), B1 = ifelse(!is.na(B1), 14, NA),
B2 = ifelse(!is.na(B2), 15, NA), B3 = ifelse(!is.na(B3), 16, NA),
B4 = ifelse(!is.na(B4), 17, NA), B5 = ifelse(!is.na(B5), 18, NA),
C0 = ifelse(!is.na(C0), 19, NA), C1 = ifelse(!is.na(C1), 20, NA),
C2 = ifelse(!is.na(C2), 21, NA), C3 = ifelse(!is.na(C3), 22, NA),
C4 = ifelse(!is.na(C4), 23, NA), C5 = ifelse(!is.na(C5), 24, NA),
CD0 = ifelse(!is.na(CD0), 25, NA), CD1 = ifelse(!is.na(CD1), 26, NA),
CD2 = ifelse(!is.na(CD2), 27, NA), CD3 = ifelse(!is.na(CD3), 28, NA),
CD4 = ifelse(!is.na(CD4), 29, NA), CD5 = ifelse(!is.na(CD5), 30, NA),
D0 = ifelse(!is.na(D0), 31, NA), D1 = ifelse(!is.na(D1), 32, NA),
D2 = ifelse(!is.na(D2), 33, NA), D3 = ifelse(!is.na(D3), 34, NA),
D4 = ifelse(!is.na(D4), 35, NA), D5 = ifelse(!is.na(D5), 36, NA)) %>%
pivot_longer(cols = c(A0:D5), names_to = "sensors", values_to = "temp") %>%
drop_na(temp) %>%
ggplot(aes(x = DateTime, y = temp)) +
geom_point(color = "darkgreen", size = 0.001) +
scale_y_continuous(breaks = 1:36, labels = sens) +
scale_x_datetime(date_labels = "%b/%y", date_breaks = "1 month") +
xlab("Data") + ylab("Sensor")
invisible(dev.off())
agg_png('C:/Users/Daniel/Desktop/WCAMA 2021/grid_miss.png',  scaling = 2, width = 3000, height = 2000, units = 'px')
data_frank %>%
mutate(A0 = ifelse(is.na(A0), 1, NA), A1 = ifelse(is.na(A1), 2, NA),
A2 = ifelse(is.na(A2), 3, NA), A3 = ifelse(is.na(A3), 4, NA),
A4 = ifelse(is.na(A4), 5, NA), A5 = ifelse(is.na(A5), 6, NA),
AB0 = ifelse(is.na(AB0), 7, NA), AB1 = ifelse(is.na(AB1), 8, NA),
AB2 = ifelse(is.na(AB2), 9, NA), AB3 = ifelse(is.na(AB3), 10, NA),
AB4 = ifelse(is.na(AB4), 11, NA), AB5 = ifelse(is.na(AB5), 12, NA),
B0 = ifelse(is.na(B0), 13, NA), B1 = ifelse(is.na(B1), 14, NA),
B2 = ifelse(is.na(B2), 15, NA), B3 = ifelse(is.na(B3), 16, NA),
B4 = ifelse(is.na(B4), 17, NA), B5 = ifelse(is.na(B5), 18, NA),
C0 = ifelse(is.na(C0), 19, NA), C1 = ifelse(is.na(C1), 20, NA),
C2 = ifelse(is.na(C2), 21, NA), C3 = ifelse(is.na(C3), 22, NA),
C4 = ifelse(is.na(C4), 23, NA), C5 = ifelse(is.na(C5), 24, NA),
CD0 = ifelse(is.na(CD0), 25, NA), CD1 = ifelse(is.na(CD1), 26, NA),
CD2 = ifelse(is.na(CD2), 27, NA), CD3 = ifelse(is.na(CD3), 28, NA),
CD4 = ifelse(is.na(CD4), 29, NA), CD5 = ifelse(is.na(CD5), 30, NA),
D0 = ifelse(is.na(D0), 31, NA), D1 = ifelse(is.na(D1), 32, NA),
D2 = ifelse(is.na(D2), 33, NA), D3 = ifelse(is.na(D3), 34, NA),
D4 = ifelse(is.na(D4), 35, NA), D5 = ifelse(is.na(D5), 36, NA)) %>%
pivot_longer(cols = c(A0:D5), names_to = "sensors", values_to = "temp") %>%
drop_na(temp) %>%
ggplot(aes(x = DateTime, y = temp)) +
geom_point(color = "darkred", size = 0.001) +
scale_y_continuous(breaks = 1:36, labels = sens) +
scale_x_datetime(date_labels = "%b/%y", date_breaks = "1 month") +
xlab("Data") + ylab("Sensor")
invisible(dev.off())
# Faixa de Tempo
agg_png('C:/Users/Daniel/Desktop/WCAMA 2021/grid_presence.png',  scaling = 4, width = 6000, height = 2000, units = 'px')
data_frank %>%
mutate(A0 = ifelse(!is.na(A0), 1, NA), A1 = ifelse(!is.na(A1), 2, NA),
A2 = ifelse(!is.na(A2), 3, NA), A3 = ifelse(!is.na(A3), 4, NA),
A4 = ifelse(!is.na(A4), 5, NA), A5 = ifelse(!is.na(A5), 6, NA),
AB0 = ifelse(!is.na(AB0), 7, NA), AB1 = ifelse(!is.na(AB1), 8, NA),
AB2 = ifelse(!is.na(AB2), 9, NA), AB3 = ifelse(!is.na(AB3), 10, NA),
AB4 = ifelse(!is.na(AB4), 11, NA), AB5 = ifelse(!is.na(AB5), 12, NA),
B0 = ifelse(!is.na(B0), 13, NA), B1 = ifelse(!is.na(B1), 14, NA),
B2 = ifelse(!is.na(B2), 15, NA), B3 = ifelse(!is.na(B3), 16, NA),
B4 = ifelse(!is.na(B4), 17, NA), B5 = ifelse(!is.na(B5), 18, NA),
C0 = ifelse(!is.na(C0), 19, NA), C1 = ifelse(!is.na(C1), 20, NA),
C2 = ifelse(!is.na(C2), 21, NA), C3 = ifelse(!is.na(C3), 22, NA),
C4 = ifelse(!is.na(C4), 23, NA), C5 = ifelse(!is.na(C5), 24, NA),
CD0 = ifelse(!is.na(CD0), 25, NA), CD1 = ifelse(!is.na(CD1), 26, NA),
CD2 = ifelse(!is.na(CD2), 27, NA), CD3 = ifelse(!is.na(CD3), 28, NA),
CD4 = ifelse(!is.na(CD4), 29, NA), CD5 = ifelse(!is.na(CD5), 30, NA),
D0 = ifelse(!is.na(D0), 31, NA), D1 = ifelse(!is.na(D1), 32, NA),
D2 = ifelse(!is.na(D2), 33, NA), D3 = ifelse(!is.na(D3), 34, NA),
D4 = ifelse(!is.na(D4), 35, NA), D5 = ifelse(!is.na(D5), 36, NA)) %>%
pivot_longer(cols = c(A0:D5), names_to = "sensors", values_to = "temp") %>%
drop_na(temp) %>%
ggplot(aes(x = DateTime, y = temp)) +
geom_point(color = "darkgreen", size = 0.001) +
scale_y_continuous(breaks = 1:36, labels = sens) +
scale_x_datetime(date_labels = "%b/%y", date_breaks = "1 month") +
xlab("Data") + ylab("Sensor")
invisible(dev.off())
agg_png('C:/Users/Daniel/Desktop/WCAMA 2021/grid_presence.png',
scaling = 4, width = 10000, height = 2000, units = 'px')
data_frank %>%
mutate(A0 = ifelse(!is.na(A0), 1, NA), A1 = ifelse(!is.na(A1), 2, NA),
A2 = ifelse(!is.na(A2), 3, NA), A3 = ifelse(!is.na(A3), 4, NA),
A4 = ifelse(!is.na(A4), 5, NA), A5 = ifelse(!is.na(A5), 6, NA),
AB0 = ifelse(!is.na(AB0), 7, NA), AB1 = ifelse(!is.na(AB1), 8, NA),
AB2 = ifelse(!is.na(AB2), 9, NA), AB3 = ifelse(!is.na(AB3), 10, NA),
AB4 = ifelse(!is.na(AB4), 11, NA), AB5 = ifelse(!is.na(AB5), 12, NA),
B0 = ifelse(!is.na(B0), 13, NA), B1 = ifelse(!is.na(B1), 14, NA),
B2 = ifelse(!is.na(B2), 15, NA), B3 = ifelse(!is.na(B3), 16, NA),
B4 = ifelse(!is.na(B4), 17, NA), B5 = ifelse(!is.na(B5), 18, NA),
C0 = ifelse(!is.na(C0), 19, NA), C1 = ifelse(!is.na(C1), 20, NA),
C2 = ifelse(!is.na(C2), 21, NA), C3 = ifelse(!is.na(C3), 22, NA),
C4 = ifelse(!is.na(C4), 23, NA), C5 = ifelse(!is.na(C5), 24, NA),
CD0 = ifelse(!is.na(CD0), 25, NA), CD1 = ifelse(!is.na(CD1), 26, NA),
CD2 = ifelse(!is.na(CD2), 27, NA), CD3 = ifelse(!is.na(CD3), 28, NA),
CD4 = ifelse(!is.na(CD4), 29, NA), CD5 = ifelse(!is.na(CD5), 30, NA),
D0 = ifelse(!is.na(D0), 31, NA), D1 = ifelse(!is.na(D1), 32, NA),
D2 = ifelse(!is.na(D2), 33, NA), D3 = ifelse(!is.na(D3), 34, NA),
D4 = ifelse(!is.na(D4), 35, NA), D5 = ifelse(!is.na(D5), 36, NA)) %>%
pivot_longer(cols = c(A0:D5), names_to = "sensors", values_to = "temp") %>%
drop_na(temp) %>%
ggplot(aes(x = DateTime, y = temp)) +
geom_point(color = "darkgreen", size = 0.001) +
scale_y_continuous(breaks = 1:36, labels = sens) +
scale_x_datetime(date_labels = "%b/%y", date_breaks = "1 month") +
xlab("Data") + ylab("Sensor")
invisible(dev.off())
agg_png('C:/Users/Daniel/Desktop/WCAMA 2021/grid_miss.png',
scaling = 4, width = 10000, height = 2000, units = 'px')
data_frank %>%
mutate(A0 = ifelse(is.na(A0), 1, NA), A1 = ifelse(is.na(A1), 2, NA),
A2 = ifelse(is.na(A2), 3, NA), A3 = ifelse(is.na(A3), 4, NA),
A4 = ifelse(is.na(A4), 5, NA), A5 = ifelse(is.na(A5), 6, NA),
AB0 = ifelse(is.na(AB0), 7, NA), AB1 = ifelse(is.na(AB1), 8, NA),
AB2 = ifelse(is.na(AB2), 9, NA), AB3 = ifelse(is.na(AB3), 10, NA),
AB4 = ifelse(is.na(AB4), 11, NA), AB5 = ifelse(is.na(AB5), 12, NA),
B0 = ifelse(is.na(B0), 13, NA), B1 = ifelse(is.na(B1), 14, NA),
B2 = ifelse(is.na(B2), 15, NA), B3 = ifelse(is.na(B3), 16, NA),
B4 = ifelse(is.na(B4), 17, NA), B5 = ifelse(is.na(B5), 18, NA),
C0 = ifelse(is.na(C0), 19, NA), C1 = ifelse(is.na(C1), 20, NA),
C2 = ifelse(is.na(C2), 21, NA), C3 = ifelse(is.na(C3), 22, NA),
C4 = ifelse(is.na(C4), 23, NA), C5 = ifelse(is.na(C5), 24, NA),
CD0 = ifelse(is.na(CD0), 25, NA), CD1 = ifelse(is.na(CD1), 26, NA),
CD2 = ifelse(is.na(CD2), 27, NA), CD3 = ifelse(is.na(CD3), 28, NA),
CD4 = ifelse(is.na(CD4), 29, NA), CD5 = ifelse(is.na(CD5), 30, NA),
D0 = ifelse(is.na(D0), 31, NA), D1 = ifelse(is.na(D1), 32, NA),
D2 = ifelse(is.na(D2), 33, NA), D3 = ifelse(is.na(D3), 34, NA),
D4 = ifelse(is.na(D4), 35, NA), D5 = ifelse(is.na(D5), 36, NA)) %>%
pivot_longer(cols = c(A0:D5), names_to = "sensors", values_to = "temp") %>%
drop_na(temp) %>%
ggplot(aes(x = DateTime, y = temp)) +
geom_point(color = "darkred", size = 0.001) +
scale_y_continuous(breaks = 1:36, labels = sens) +
scale_x_datetime(date_labels = "%b/%y", date_breaks = "1 month") +
xlab("Data") + ylab("Sensor")
invisible(dev.off())
# Quantidade de Amostras
nrow(data_frank)
ftempo <- difftime(data_frank$DateTime[-1],
data_frank$DateTime[-34780], units = "min")
qplot(ftempo, bins = 30, xlim = c(0, 50)) +
xlab("Periodicidade (Minutos)") + ylab("Contagem de Observações") +
theme_bw()
agg_png('C:/Users/Daniel/Desktop/WCAMA 2021/grid_periodicidade.png',
scaling = 4, width = 3000, height = 2000, units = 'px')
qplot(ftempo, bins = 30, xlim = c(0, 50)) +
xlab("Periodicidade (Minutos)") + ylab("Contagem de Observações")
invisible(dev.off())
library(tidyverse)
library(lubridate)
library(ggthemr)
library(ragg)
ggthemr("fresh")
data_frank <- read_csv("C:/Users/Daniel/Desktop/WCAMA 2021/sheet_master.csv")
data_frank %>%
drop_na(A0:D5)
data_frank %>%
drop_na(A0:D5) %>%
mutate(A0 = ifelse(!is.na(A0), 1, NA), A1 = ifelse(!is.na(A1), 2, NA),
A2 = ifelse(!is.na(A2), 3, NA), A3 = ifelse(!is.na(A3), 4, NA),
A4 = ifelse(!is.na(A4), 5, NA), A5 = ifelse(!is.na(A5), 6, NA),
AB0 = ifelse(!is.na(AB0), 7, NA), AB1 = ifelse(!is.na(AB1), 8, NA),
AB2 = ifelse(!is.na(AB2), 9, NA), AB3 = ifelse(!is.na(AB3), 10, NA),
AB4 = ifelse(!is.na(AB4), 11, NA), AB5 = ifelse(!is.na(AB5), 12, NA),
B0 = ifelse(!is.na(B0), 13, NA), B1 = ifelse(!is.na(B1), 14, NA),
B2 = ifelse(!is.na(B2), 15, NA), B3 = ifelse(!is.na(B3), 16, NA),
B4 = ifelse(!is.na(B4), 17, NA), B5 = ifelse(!is.na(B5), 18, NA),
C0 = ifelse(!is.na(C0), 19, NA), C1 = ifelse(!is.na(C1), 20, NA),
C2 = ifelse(!is.na(C2), 21, NA), C3 = ifelse(!is.na(C3), 22, NA),
C4 = ifelse(!is.na(C4), 23, NA), C5 = ifelse(!is.na(C5), 24, NA),
CD0 = ifelse(!is.na(CD0), 25, NA), CD1 = ifelse(!is.na(CD1), 26, NA),
CD2 = ifelse(!is.na(CD2), 27, NA), CD3 = ifelse(!is.na(CD3), 28, NA),
CD4 = ifelse(!is.na(CD4), 29, NA), CD5 = ifelse(!is.na(CD5), 30, NA),
D0 = ifelse(!is.na(D0), 31, NA), D1 = ifelse(!is.na(D1), 32, NA),
D2 = ifelse(!is.na(D2), 33, NA), D3 = ifelse(!is.na(D3), 34, NA),
D4 = ifelse(!is.na(D4), 35, NA), D5 = ifelse(!is.na(D5), 36, NA))
agg_png('C:/Users/Daniel/Desktop/WCAMA 2021/grid_complet_all.png',
scaling = 4, width = 10000, height = 2000, units = 'px')
data_frank %>%
drop_na(A0:D5) %>%
mutate(A0 = ifelse(!is.na(A0), 1, NA), A1 = ifelse(!is.na(A1), 2, NA),
A2 = ifelse(!is.na(A2), 3, NA), A3 = ifelse(!is.na(A3), 4, NA),
A4 = ifelse(!is.na(A4), 5, NA), A5 = ifelse(!is.na(A5), 6, NA),
AB0 = ifelse(!is.na(AB0), 7, NA), AB1 = ifelse(!is.na(AB1), 8, NA),
AB2 = ifelse(!is.na(AB2), 9, NA), AB3 = ifelse(!is.na(AB3), 10, NA),
AB4 = ifelse(!is.na(AB4), 11, NA), AB5 = ifelse(!is.na(AB5), 12, NA),
B0 = ifelse(!is.na(B0), 13, NA), B1 = ifelse(!is.na(B1), 14, NA),
B2 = ifelse(!is.na(B2), 15, NA), B3 = ifelse(!is.na(B3), 16, NA),
B4 = ifelse(!is.na(B4), 17, NA), B5 = ifelse(!is.na(B5), 18, NA),
C0 = ifelse(!is.na(C0), 19, NA), C1 = ifelse(!is.na(C1), 20, NA),
C2 = ifelse(!is.na(C2), 21, NA), C3 = ifelse(!is.na(C3), 22, NA),
C4 = ifelse(!is.na(C4), 23, NA), C5 = ifelse(!is.na(C5), 24, NA),
CD0 = ifelse(!is.na(CD0), 25, NA), CD1 = ifelse(!is.na(CD1), 26, NA),
CD2 = ifelse(!is.na(CD2), 27, NA), CD3 = ifelse(!is.na(CD3), 28, NA),
CD4 = ifelse(!is.na(CD4), 29, NA), CD5 = ifelse(!is.na(CD5), 30, NA),
D0 = ifelse(!is.na(D0), 31, NA), D1 = ifelse(!is.na(D1), 32, NA),
D2 = ifelse(!is.na(D2), 33, NA), D3 = ifelse(!is.na(D3), 34, NA),
D4 = ifelse(!is.na(D4), 35, NA), D5 = ifelse(!is.na(D5), 36, NA)) %>%
pivot_longer(cols = c(A0:D5), names_to = "sensors", values_to = "temp") %>%
ggplot(aes(x = DateTime, y = temp)) +
geom_point(color = "darkred", size = 0.001) +
scale_y_continuous(breaks = 1:36, labels = sens) +
scale_x_datetime(date_labels = "%b/%y", date_breaks = "1 month") +
xlab("Data") + ylab("Sensor")
invisible(dev.off())
sens <- c(paste0("A", 0:5), paste0("AB", 0:5), paste0("B", 0:5),
paste0("C", 0:5), paste0("CD", 0:5), paste0("D", 0:5))
agg_png('C:/Users/Daniel/Desktop/WCAMA 2021/grid_complet_all.png',
scaling = 4, width = 10000, height = 2000, units = 'px')
data_frank %>%
drop_na(A0:D5) %>%
mutate(A0 = ifelse(!is.na(A0), 1, NA), A1 = ifelse(!is.na(A1), 2, NA),
A2 = ifelse(!is.na(A2), 3, NA), A3 = ifelse(!is.na(A3), 4, NA),
A4 = ifelse(!is.na(A4), 5, NA), A5 = ifelse(!is.na(A5), 6, NA),
AB0 = ifelse(!is.na(AB0), 7, NA), AB1 = ifelse(!is.na(AB1), 8, NA),
AB2 = ifelse(!is.na(AB2), 9, NA), AB3 = ifelse(!is.na(AB3), 10, NA),
AB4 = ifelse(!is.na(AB4), 11, NA), AB5 = ifelse(!is.na(AB5), 12, NA),
B0 = ifelse(!is.na(B0), 13, NA), B1 = ifelse(!is.na(B1), 14, NA),
B2 = ifelse(!is.na(B2), 15, NA), B3 = ifelse(!is.na(B3), 16, NA),
B4 = ifelse(!is.na(B4), 17, NA), B5 = ifelse(!is.na(B5), 18, NA),
C0 = ifelse(!is.na(C0), 19, NA), C1 = ifelse(!is.na(C1), 20, NA),
C2 = ifelse(!is.na(C2), 21, NA), C3 = ifelse(!is.na(C3), 22, NA),
C4 = ifelse(!is.na(C4), 23, NA), C5 = ifelse(!is.na(C5), 24, NA),
CD0 = ifelse(!is.na(CD0), 25, NA), CD1 = ifelse(!is.na(CD1), 26, NA),
CD2 = ifelse(!is.na(CD2), 27, NA), CD3 = ifelse(!is.na(CD3), 28, NA),
CD4 = ifelse(!is.na(CD4), 29, NA), CD5 = ifelse(!is.na(CD5), 30, NA),
D0 = ifelse(!is.na(D0), 31, NA), D1 = ifelse(!is.na(D1), 32, NA),
D2 = ifelse(!is.na(D2), 33, NA), D3 = ifelse(!is.na(D3), 34, NA),
D4 = ifelse(!is.na(D4), 35, NA), D5 = ifelse(!is.na(D5), 36, NA)) %>%
pivot_longer(cols = c(A0:D5), names_to = "sensors", values_to = "temp") %>%
ggplot(aes(x = DateTime, y = temp)) +
geom_point(color = "darkred", size = 0.001) +
scale_y_continuous(breaks = 1:36, labels = sens) +
scale_x_datetime(date_labels = "%b/%y", date_breaks = "1 month") +
xlab("Data") + ylab("Sensor")
invisible(dev.off())
agg_png('C:/Users/Daniel/Desktop/WCAMA 2021/grid_complet_all.png',
scaling = 4, width = 10000, height = 2000, units = 'px')
data_frank %>%
drop_na(A0:D5) %>%
mutate(A0 = ifelse(!is.na(A0), 1, NA), A1 = ifelse(!is.na(A1), 2, NA),
A2 = ifelse(!is.na(A2), 3, NA), A3 = ifelse(!is.na(A3), 4, NA),
A4 = ifelse(!is.na(A4), 5, NA), A5 = ifelse(!is.na(A5), 6, NA),
AB0 = ifelse(!is.na(AB0), 7, NA), AB1 = ifelse(!is.na(AB1), 8, NA),
AB2 = ifelse(!is.na(AB2), 9, NA), AB3 = ifelse(!is.na(AB3), 10, NA),
AB4 = ifelse(!is.na(AB4), 11, NA), AB5 = ifelse(!is.na(AB5), 12, NA),
B0 = ifelse(!is.na(B0), 13, NA), B1 = ifelse(!is.na(B1), 14, NA),
B2 = ifelse(!is.na(B2), 15, NA), B3 = ifelse(!is.na(B3), 16, NA),
B4 = ifelse(!is.na(B4), 17, NA), B5 = ifelse(!is.na(B5), 18, NA),
C0 = ifelse(!is.na(C0), 19, NA), C1 = ifelse(!is.na(C1), 20, NA),
C2 = ifelse(!is.na(C2), 21, NA), C3 = ifelse(!is.na(C3), 22, NA),
C4 = ifelse(!is.na(C4), 23, NA), C5 = ifelse(!is.na(C5), 24, NA),
CD0 = ifelse(!is.na(CD0), 25, NA), CD1 = ifelse(!is.na(CD1), 26, NA),
CD2 = ifelse(!is.na(CD2), 27, NA), CD3 = ifelse(!is.na(CD3), 28, NA),
CD4 = ifelse(!is.na(CD4), 29, NA), CD5 = ifelse(!is.na(CD5), 30, NA),
D0 = ifelse(!is.na(D0), 31, NA), D1 = ifelse(!is.na(D1), 32, NA),
D2 = ifelse(!is.na(D2), 33, NA), D3 = ifelse(!is.na(D3), 34, NA),
D4 = ifelse(!is.na(D4), 35, NA), D5 = ifelse(!is.na(D5), 36, NA)) %>%
pivot_longer(cols = c(A0:D5), names_to = "sensors", values_to = "temp") %>%
ggplot(aes(x = DateTime, y = temp)) +
geom_point(color = "darkgreen", size = 0.001) +
scale_y_continuous(breaks = 1:36, labels = sens) +
scale_x_datetime(date_labels = "%b/%y", date_breaks = "1 month") +
xlab("Data") + ylab("Sensor")
invisible(dev.off())
gc()
install.packages('reticulate')
devtools::install_github("Non-Contradiction/autodiffr")
library(autodiffr)
f <- function(x) sin(x) + 3*x^3 + log(x)/exp(x^0.5)
ad_grad(f, c(2, 3))
library(tidyverse)
library(MASS)
library(autodiffr)
f
ad_grad(f, c(2, 3))
setwd("C:/Users/Daniel/Desktop/Disciplinas/Tópicos Especiais em Lógica II/Trabalho Final")
library(rjson)
library(stringr)
# ID's de todos os jogos regulares do Houston Rockets (HOU) 19/20
schedules <- c(15, 32, 45, 61, 69, 86, 93, 107, 129, 142, 157,
169, 179, 193, 211, 224, 235, 259, 282, 303, 318,
333, 346, 356, 371, 386, 396, 419, 437, 453, 457,
478, 488, 501, 520, 558, 566, 577, 600, 611, 633,
645, 662, 675, 685, 698, 712, 722, 738, 752, 768,
774, 790, 806, 825, 841, 853, 870, 892, 903, 927,
940, 953, 963, 1238, 1248, 1261, 1273, 1290, 1298,
1304, 1315)
schedules <- paste0("002190", str_pad(as.character(schedules), 4, pad = "0"))
# Scrapping
for (i in schedules){
pbpURL <- paste0("http://data.nba.net/v2015/json/mobile_teams/nba/2019/scores/pbp/", i, "_full_pbp.json")
check <- tryCatch(pbpData <- fromJSON(file = pbpURL, method = "C"),
warning = function(war) {
message(paste("URL não encontrada no jogo", i))
next
},
error = function(err) message("Pulando para o próximo jogo"),
finally = function(f) print(paste("e: ", e)))
if(!str_detect(pbpData$g[3]$gcode, "HOU")) next
pbpDataf <- data.frame(matrix(unlist(pbpData$g$pd[[1]]$pla), ncol = 17, byrow = TRUE))
for (j in 2:length(pbpData$g$pd)){
pbpDataf <- rbind(pbpDataf,data.frame(matrix(unlist(pbpData$g$pd[[j]]$pla), ncol=16, byrow = TRUE)))
}
colnames(pbpDataf) <- c("evt","cl","de","locX","locY","opt1","opt2","mtype","etype","opid","tid","pid","hs","vs","epid","oftid", "ord")
write.csv(pbpDataf, file = paste0("raw_data/", gsub("/","-",pbpData$g[3]$gcode),".csv"))
message(paste0("Jogo ", i, ": ", gsub("/","-",pbpData$g[3]$gcode), " Importado com Sucesso!"))
}
pbpURL <- paste0("http://data.nba.net/v2015/json/mobile_teams/nba/2019/scores/pbp/", i, "_full_pbp.json")
check <- tryCatch(pbpData <- fromJSON(file = pbpURL, method = "C"),
warning = function(war) {
message(paste("URL não encontrada no jogo", i))
next
},
error = function(err) message("Pulando para o próximo jogo"),
finally = function(f) print(paste("e: ", e)))
unlist(pbpData$g$pd[[1]]$pla)
a <- unlist(pbpData$g$pd[[1]]$pla)
a/17
length(a)/17
matrix(unlist(pbpData$g$pd[[1]]$pla), ncol = 17, byrow = TRUE)
library(dplyr)
library(rjson)
library(stringr)
library(dplyr)
# ID's de todos os jogos regulares do Houston Rockets (HOU) 19/20
schedules <- c(15, 32, 45, 61, 69, 86, 93, 107, 129, 142, 157,
169, 179, 193, 211, 224, 235, 259, 282, 303, 318,
333, 346, 356, 371, 386, 396, 419, 437, 453, 457,
478, 488, 501, 520, 558, 566, 577, 600, 611, 633,
645, 662, 675, 685, 698, 712, 722, 738, 752, 768,
774, 790, 806, 825, 841, 853, 870, 892, 903, 927,
940, 953, 963, 1238, 1248, 1261, 1273, 1290, 1298,
1304, 1315)
schedules <- paste0("002190", str_pad(as.character(schedules), 4, pad = "0"))
# Scrapping
for (i in schedules){
pbpURL <- paste0("http://data.nba.net/v2015/json/mobile_teams/nba/2019/scores/pbp/", i, "_full_pbp.json")
check <- tryCatch(pbpData <- fromJSON(file = pbpURL, method = "C"),
warning = function(war) {
message(paste("URL não encontrada no jogo", i))
next
},
error = function(err) message("Pulando para o próximo jogo"),
finally = function(f) print(paste("e: ", e)))
pbpDataf <- as_tibble(matrix(unlist(pbpData$g$pd[[1]]$pla), ncol = 17, byrow = TRUE))
for (j in 2:length(pbpData$g$pd)){
pbpDataf <- bind_rows(pbpDataf, as_tibble(matrix(unlist(pbpData$g$pd[[j]]$pla), ncol = 17, byrow = TRUE)))
}
colnames(pbpDataf) <- c("evt","cl","de","locX","locY","opt1","opt2","mtype","etype","opid","tid","pid","hs","vs","epid","oftid", "ord")
write.csv(pbpDataf, file = paste0("raw_data/", gsub("/","-",pbpData$g[3]$gcode),".csv"))
message(paste0("Jogo ", i, ": ", gsub("/","-",pbpData$g[3]$gcode), " Importado com Sucesso!"))
}
library(readr)
library(dplyr)
library(fs)
paths <- dir_ls("./raw_data/", glob = "*.csv")
paths
library(purrr)
data <- map_dfr(paths, read_csv, id = "path")
data <- map_dfr(paths, read_csv, id = "paths")
data <- map_dfr(.x = paths, .f = read_csv, id = "a")
data <- map_dfr(.x = paths, .f = read_csv, .id = "a")
warnings()
data <- map_dfr(paths, read_csv, "path")
data <- map_dfr(.x = paths, .f = read_csv, .id = "path")
data <- map_dfr(paths, read_csv, .id = "path")
head(data)
data$path[1]
library(tidyr)
# Preprocessamento
data %>%
mutate(path = str_extract(path, "(?<=\-)(.*?)(?=\.)")) %>%
select(path, evt, cl, de, locX, locY)
detach("package:stats", unload = TRUE)
library(dplyr)
library(readr)
library(fs)
library(purrr)
library(tidyr)
paths <- dir_ls("./raw_data/", glob = "*.csv")
data <- map_dfr(paths, read_csv, .id = "path")
# Preprocessamento
data %>%
mutate(path = str_extract(path, "(?<=\-)(.*?)(?=\.)")) %>%
select(path, evt, cl, de, locX, locY)
# Preprocessamento
data %>%
mutate(path = str_extract(path, "(?<=\\-)(.*?)(?=\\.)")) %>%
select(path, evt, cl, de, locX, locY)
library(stringr)
# Preprocessamento
data %>%
mutate(path = str_extract(path, "(?<=\\-)(.*?)(?=\\.)")) %>%
select(path, evt, cl, de, locX, locY)
data$opt1
data$opt2
data$hs
# Preprocessamento
data %>%
mutate(path = str_extract(path, "(?<=\\-)(.*?)(?=\\.)")) %>%
select(path, evt, cl, de, locX, locY)
# Preprocessamento
data %>%
mutate(path = str_extract(path, "(?<=\\-)(.*?)(?=\\.)")) %>%
separate(col = path, into = c("HomeName", "AwayName"), sep = 3) %>%
rename(Time = cl, Description = de, HomeScore = hs, AwayScore = vs) %>%
select(Time, HomeName, HomeScore, AwayName, AwayScore, Description, locX, locY)
schedules
schedules[1]
# Preprocessamento
data %>%
mutate(path = str_extract(path, "(?<=\\-)(.*?)(?=\\.)")) %>%
separate(col = path, into = c("AwayName", "HomeName"), sep = 3) %>%
rename(Time = cl, Description = de, HomeScore = hs, AwayScore = vs) %>%
select(Time, HomeName, HomeScore, AwayName, AwayScore, Description, locX, locY)
